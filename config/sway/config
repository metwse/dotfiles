set $COMMON $HOME/.config/wm-common

set $SS_DIR "$HOME/Pictures/ss"
set $WALLPAPER "$HOME/Pictures/wallpaper.png"

set $BROWSER "firefox"
set $BROWSER2 "google-chrome --enable-features=WebUIDarkMode --force-dark-mode"
set $TERMINAL "foot"
set $FILE_EXPLORER "nemo"

set $LOCK "swaylock -c 212121"
set $CLIPBOARD_MANAGER "cliphist list | rofi -dmenu | cliphist decode | wl-copy"

set $m Mod4
set $m2 Mod1


include $COMMON/bar.conf
include $COMMON/system.conf
include $COMMON/tiling.conf
include $COMMON/workspaces.conf


exec wl-paste --watch cliphist store

exec swaybg -i $WALLPAPER


# SCREENSHOTS
# ----------------------------------------------------------------------------
exec mkdir -p $SS_DIR

bindsym Print exec grim "$SS_DIR/$(date).png"
bindsym Shift+Print exec grim -g "$(slurp)" "$SS_DIR/$(date).png"

# clipboard
bindsym Ctrl+Print exec grim - | wl-copy
bindsym Ctrl+Shift+Print exec grim -g "$(slurp)" - | wl-copy


# SYSTEM
# ----------------------------------------------------------------------------
# Some variables need to be exported to systemd and/or dbus activation
# environments so tools that rely on them work properly. The essential ones
# are: WAYLAND_DISPLAY, DISPLAY (if XWayland is used), XDG_CURRENT_DESKTOP,
# plus Sway's: SWAYSOCK, I3SOCK, XCURSOR_SIZE, XCURSOR_THEME.
exec systemctl --user import-environment WAYLAND_DISPLAY DISPLAY \
    XDG_CURRENT_DESKTOP SWAYSOCK I3SOCK XCURSOR_SIZE XCURSOR_THEME
exec dbus-update-activation-environment WAYLAND_DISPLAY DISPLAY \
    XDG_CURRENT_DESKTOP SWAYSOCK I3SOCK XCURSOR_SIZE XCURSOR_THEME

# swayidle grabs a logind suspend inhibit lock and will use swaylock to lock
# the screen before suspend.
exec swayidle -w lock $LOCK before-sleep $LOCK


# WINDOW CLASS ASSIGNMENTS
# ----------------------------------------------------------------------------
for_window [app_id="(i?).*terminal.*"] border none
for_window [app_id="foot"] border none

for_window [app_id="Google-chrome"] layout tabbed; border none
for_window [app_id="firefox"] layout tabbed; border none
for_window [app_id="discord"] fullscreen enable; border none

for_window [app_id="Nautilus"] floating enable
for_window [app_id="nemo"] floating enable

for_window [app_id="Gpick"] floating enable


assign [app_id="(i?).*terminal.*"] $ws1
assign [app_id="Google-chrome"] $ws2
assign [app_id="firefox"] $ws2
assign [app_id="discord"] $ws2

exec $TERMINAL
exec $BROWSER
